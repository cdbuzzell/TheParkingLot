@inject IOptions<AppSettings> AppSettings
@model TheParkingLot.ViewModels.Home.IndexViewModel
@{
    ViewData["Title"] = "Home";
}

<div class="row">
    <div class="col-md-4">
        <div id="beerduty">
            @if (Model.Schedule.Count > 0)
            {
                <div id="avatar">
                    @if (Model.Schedule[0].Avatar != null)
                    {
                        <img src="@(String.Format("data:image/jpg;base64,{0}", Convert.ToBase64String(Model.Schedule[0].Avatar)))" />
                    }
                    else
                    {
                        <img src="~/images/avatar.jpg" />
                    }
                </div>
                <div id="avatar-text">
                    <h3>Beer Duty<br />@(Model.Schedule[0].Date.ToString("M/dd")) @(Model.Schedule[0].GolferName)</h3>
                </div>
            }
        </div>
        <div id="twitter">
            <a class="twitter-timeline" data-link-color="" data-chrome="nofooter transparent" data-border-color="" data-tweet-limit="5" data-dnt="true" href="https://twitter.com/ParkingLotGolf" data-widget-id="455025593046691840">Tweets by @@ParkingLotGolf</a>
            <script>    !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
        </div>
        <div id="leaderboard">
            <h3>@AppSettings.Value.CurrentSeason Leaderboard</h3>
            <table class="table">
                <tr>
                    <th>Rank</th>
                    <th>Golfer</th>
                    <th class="text-right">Points</th>
                    <th class="text-right">Behind</th>
                </tr>
                @foreach(GolferPointTotal golfer in Model.Leaderboard)
                {
                    <tr>
                        <td>@golfer.Rank</td>
                        <td>@golfer.GolferName</td>
                        <td class="text-right">@golfer.TotalPoints</td>
                        <td class="text-right">@golfer.PointsBehind</td>
                    </tr>
                }
            </table>
        </div>
    </div>
    <div class="col-md-8">
        <iframe id="forecast_embed" type="text/html" frameborder="0" height="225" width="100%" 
                src="http://forecast.io/embed/#lat=44.74203&lon=-93.025746&name=Rich Valley Golf Course&color=#00aaff&font=Segoe UI&units=us">
        </iframe>

        <div id="rounds">
            <h3>Upcoming Rounds</h3>
            <table class="table">
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Event</th>
                    <th>Course</th>
                    <th>Beer Duty</th>
                </tr>
                @foreach (Round round in Model.Schedule)
                {
                    <tr>
                        <td>@round.Date.ToString("ddd M/dd")</td>
                        <td>@round.Date.ToString("h:mm tt")</td>
                        <td>@round.RoundName</td>
                        <td>@round.CourseName</td>
                        <td>@round.GolferName</td>
                    </tr>
                }
            </table>
        </div>

    </div>
</div>
